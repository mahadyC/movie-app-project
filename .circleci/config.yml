version: 2.1

executors:
  node-executor:
    docker:
- image: circleci/node:8.15
jobs:
  deploy-job:
    docker:
      - image: node:8.15.0-alpine
    steps:
      - checkout
      - run: 
          name: Install dependencies
          command: npm ci
      - add_ssh_keys:
          fingerprints:
            - "e8:8b:73:4b:79:a8:ab:9f:c8:25:4f:10:60:29:cc:b0"    
      - run:
          name: Run build and deploy
          command: npm run deploy
      
workflows:
  version: 2
  install_build_deploy:
    jobs:
      - deploy-job

